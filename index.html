<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Notes</title>
    <style>
        :root {
            --ios-gold: #d4a017;
        }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Arial, sans-serif;
            overflow: hidden; background: #000;
        }

        /* Common Wallpaper Background */
        .wallpaper {
            position: absolute; width: 100%; height: 100%;
            background: url('mountains.JPG') center/cover no-repeat;
            z-index: 1;
        }

        /* LOCK SCREEN */
        #lock-screen {
            position: absolute; width: 100%; height: 100%;
            z-index: 100; display: flex; flex-direction: column; align-items: center;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s;
        }

        #clock { 
            color: white; font-size: 84px; font-weight: 200; 
            margin-top: 80px; letter-spacing: -2px; 
        }

        .passcode-section { margin-top: 40px; text-align: center; color: white; }
        .dots { display: flex; gap: 15px; justify-content: center; margin-top: 20px; }
        .dot { width: 12px; height: 12px; border: 1.5px solid white; border-radius: 50%; }
        .dot.filled { background: white; }

        .keypad {
            display: grid; grid-template-columns: repeat(3, 80px); gap: 20px;
            margin-top: auto; margin-bottom: 70px;
        }
        .key {
            width: 80px; height: 80px; border-radius: 50%;
            background: rgba(255,255,255,0.15); color: white;
            display: flex; align-items: center; justify-content: center;
            font-size: 32px; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
        }

        /* HOME SCREEN */
        #home-screen {
            position: absolute; width: 100%; height: 100%;
            display: none; grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(6, 100px);
            padding: 60px 20px; gap: 20px; z-index: 50;
        }
        .icon { text-align: center; color: white; font-size: 11px; cursor: pointer; }
        .icon img { width: 60px; height: 60px; border-radius: 13px; display: block; margin: 0 auto 5px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }

        /* NOTES APP UI */
        #notes-app {
            position: absolute; width: 100%; height: 100%;
            background: white; display: none; z-index: 200; flex-direction: column;
            animation: appOpen 0.4s ease-out;
        }
        @keyframes appOpen {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .notes-header {
            padding: 50px 20px 10px; display: flex; justify-content: space-between;
            align-items: center; background: #f9f9f9; border-bottom: 1px solid #ddd;
        }
        .notes-header span { color: var(--ios-gold); font-size: 17px; font-weight: 400; }

        #note-editor {
            flex: 1; padding: 20px; font-size: 19px; outline: none;
            color: #1a1a1a; line-height: 1.4; overflow-y: auto;
        }

        /* Animations */
        .unlock-zoom { transform: scale(3); opacity: 0; pointer-events: none; }
        .shake { animation: shake 0.3s; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-10px); }
            40%, 80% { transform: translateX(10px); }
        }
    </style>
</head>
<body>

    <div class="wallpaper"></div>

    <div id="lock-screen">
        <div id="clock">12:00</div>
        <div class="passcode-section">
            <div>Enter Passcode</div>
            <div class="dots" id="dots">
                <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
            </div>
        </div>
        <div class="keypad">
            <div class="key" onclick="press('1')">1</div><div class="key" onclick="press('2')">2</div><div class="key" onclick="press('3')">3</div>
            <div class="key" onclick="press('4')">4</div><div class="key" onclick="press('5')">5</div><div class="key" onclick="press('6')">6</div>
            <div class="key" onclick="press('7')">7</div><div class="key" onclick="press('8')">8</div><div class="key" onclick="press('9')">9</div>
            <div></div><div class="key" onclick="press('0')">0</div>
        </div>
    </div>

    <div id="home-screen">
        <div class="icon" onclick="openNotes()">
            <img src="https://upload.wikimedia.org/wikipedia/commons/e/e5/Notes_icon.svg" alt="Notes">
            <span>Notes</span>
        </div>
    </div>

    <div id="notes-app">
        <div class="notes-header">
            <span onclick="closeNotes()">&#10094; Notes</span>
            <span style="font-weight: 600;" onclick="closeNotes()">Done</span>
        </div>
        <div id="note-editor" contenteditable="true" oninput="saveNote()" placeholder="Start typing..."></div>
    </div>

    <script>
        let currentInput = "";
        const validPrefixes = ["12", "23", "34", "45", "56", "67", "78"];
        const daysMap = {
            "12": "Monday", "23": "Tuesday", "34": "Wednesday",
            "45": "Thursday", "56": "Friday", "67": "Saturday", "78": "Sunday"
        };

        function updateClock() {
            const now = new Date();
            let hours = now.getHours();
            let minutes = now.getMinutes();
            hours = hours % 12 || 12;
            minutes = minutes < 10 ? '0' + minutes : minutes;
            document.getElementById('clock').innerText = hours + ":" + minutes;
        }
        setInterval(updateClock, 1000);
        updateClock();

        function press(num) {
            if (currentInput.length < 4) {
                currentInput += num;
                updateDots();
                
                if (currentInput.length === 4) {
                    const prefix = currentInput.substring(0, 2);
                    const suffix = currentInput.substring(2, 4);
                    
                    if (suffix === "80" && validPrefixes.includes(prefix)) {
                        unlock(daysMap[prefix]);
                    } else {
                        triggerError();
                    }
                }
            }
        }

        function updateDots() {
            const dots = document.querySelectorAll('.dot');
            dots.forEach((dot, i) => {
                dot.classList.toggle('filled', i < currentInput.length);
            });
        }

        function triggerError() {
            const ls = document.getElementById('lock-screen');
            ls.classList.add('shake');
            setTimeout(() => {
                ls.classList.remove('shake');
                currentInput = "";
                updateDots();
            }, 400);
        }

        function unlock(secretDay) {
            // Process the "xxx" change
            let savedText = localStorage.getItem('note_content') || "";
            if (savedText.includes('xxx')) {
                savedText = savedText.replace(/xxx/g, secretDay);
                localStorage.setItem('note_content', savedText);
                document.getElementById('note-editor').innerText = savedText;
            }

            document.getElementById('lock-screen').classList.add('unlock-zoom');
            document.getElementById('home-screen').style.display = 'grid';
            
            // Clean up for next time
            setTimeout(() => {
                currentInput = "";
                updateDots();
            }, 1000);
        }

        function openNotes() {
            document.getElementById('notes-app').style.display = 'flex';
            document.getElementById('note-editor').innerText = localStorage.getItem('note_content') || "";
            document.getElementById('note-editor').focus();
        }

        function closeNotes() {
            document.getElementById('notes-app').style.display = 'none';
        }

        function saveNote() {
            const content = document.getElementById('note-editor').innerText;
            localStorage.setItem('note_content', content);
        }

        // Prevent standard browser behaviors
        document.addEventListener('touchmove', (e) => { if(e.touches.length > 1) e.preventDefault(); }, {passive: false});
    </script>
</body>
</html>
